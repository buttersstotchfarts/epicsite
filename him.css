:root {
    --primary-pink: #ff85c1;
    --dark-pink: #d96d9a;
    --light-pink: #fff0f6;
    --bg-color: #4a2c40;
    --text-color: #4f294a;
}
body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    background-color: var(--bg-color);
    font-family: 'M PLUS Rounded 1c', sans-serif;
    overflow: hidden;
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}
.hidden { display: none !important; }

#game-container { position: relative; width: 100%; height: 100%; }
#scene-background { 
    position: absolute; width: 100%; height: 100%; 
    background-color: #1e1e1e; 
    background-image: radial-gradient(#333 1px, transparent 1px);
    background-size: 20px 20px;
}
#ui-container { position: relative; width: 100%; height: 100%; z-index: 2; }

#datetime-display, #location-display {
    position: absolute;
    background-color: rgba(0,0,0,0.5);
    color: white;
    padding: 5px 15px;
    font-size: 14px;
    font-weight: 700;
    text-shadow: 1px 1px 2px #000;
    border: 1px solid rgba(255,255,255,0.2);
    z-index: 15;
}
#datetime-display { top: 15px; left: 15px; border-radius: 15px; }
#location-display { top: 15px; left: 50%; transform: translateX(-50%); border-radius: 0 0 10px 10px; border-top: none; }

/* MODIFIED: Character position adjusted */
#character-container {
    position: absolute;
    bottom: 15vh; /* Moved up slightly */
    left: 50%;
    transform: translateX(-50%);
    width: 65vmin;
    max-width: 400px;
    z-index: 5;
}
#character-sprite {
    width: 100%; height: auto;
    filter: drop-shadow(0 5px 20px rgba(0,0,0,0.6));
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s ease-out;
    opacity: 0;
    transform: scale(0.8);
    display: block;
}
#character-sprite.active { opacity: 1; transform: scale(1); }
#character-sprite.leaving { transform: translateX(-100vw) scale(0.8); opacity: 0; }

#dialogue-container {
    position: absolute;
    bottom: 4vh;
    left: 50%;
    transform: translateX(-50%);
    width: 90vw;
    max-width: 800px;
    background-color: var(--light-pink);
    border: 4px solid var(--dark-pink);
    border-radius: 25px;
    padding: 20px 25px;
    box-sizing: border-box;
    color: var(--text-color);
    box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    cursor: pointer;
    z-index: 10;
}
#nameplate { position: absolute; top: -25px; left: 30px; background: var(--primary-pink); color: white; padding: 8px 25px; border-radius: 15px; font-weight: 800; font-size: 1.3rem; border: 3px solid var(--light-pink); text-shadow: 1px 1px 2px var(--dark-pink); }
#nameplate::before { content: '♥'; margin-right: 8px; }

#content-area { font-size: clamp(1rem, 2.5vmin, 1.5rem); min-height: 100px; line-height: 1.6; }
#dialogue-text.typing::after { content: '▋'; animation: blink 1s step-end infinite; }
@keyframes blink { 50% { opacity: 0; } }

#continue-prompt { position: absolute; bottom: 15px; right: 25px; font-size: 2rem; color: var(--primary-pink); animation: bounce 1.5s infinite ease-in-out; display: none; }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

#choices-area { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
.choice-button { background-color: white; border: 2px solid var(--dark-pink); color: var(--text-color); padding: 15px; border-radius: 15px; font-size: clamp(1rem, 2.2vmin, 1.3rem); font-weight: 700; cursor: pointer; text-align: center; transition: all 0.2s ease-out; }
.choice-button:hover { background-color: var(--primary-pink); color: white; transform: scale(1.05); border-color: var(--primary-pink); text-shadow: 1px 1px 2px var(--dark-pink); }

#input-area { display: flex; flex-direction: column; align-items: center; gap: 10px; padding: 10px 0; }
#name-input { width: 80%; padding: 10px; border-radius: 10px; border: 2px solid var(--dark-pink); background-color: white; color: var(--text-color); font-family: 'M PLUS Rounded 1c', sans-serif; font-size: 1.1rem; text-align: center; }
#name-input:focus { outline: 2px solid var(--primary-pink); }
#name-submit-button { padding: 8px 25px; border-radius: 10px; border: none; background-color: var(--primary-pink); color: white; font-family: 'M PLUS Rounded 1c', sans-serif; font-weight: 700; font-size: 1rem; cursor: pointer; transition: background-color 0.2s; }
#name-submit-button:hover { background-color: var(--dark-pink); }